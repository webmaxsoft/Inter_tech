<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>contact_me</title>
    <link rel="stylesheet" href="contact_me_css/style_contact_me_page.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alef&display=swap" rel="stylesheet">
</head>
<body>
<div class="dropdown" id="myDropdown">
    <img class="menu-icon" src="contact_me_images/Group%208.svg" onclick="toggleDropdown()"></img>
    <div class="dropdown-content">
        <a href="main_page.html">Main</a>
        <a href="telegram_bot_page.html">Telegram bot</a>
        <a href="web-design_page.html">Web-design</a>
        <a href="design_page.html">Design</a>
    </div>
</div>
<div class="all_inputs">
    <form action="https://formspree.io/f/xknlajvj" method="POST" onsubmit="return clearFields()">
        <div class="title">Contact me</div>
        <label>
            <input class="name" type="text" id="name" name="name" placeholder="Name">
        </label>
        <label>
            <input class="email" id="email" type="email" name="email" placeholder="Email">
        </label>
        <br>
        <label>
            <input class="tel" id="phone" type="tel" name="phone_number" placeholder="Phone number">
        </label>
        <br>
        <label>
            <textarea class="comments" id="comments" name="comments" placeholder="Comments" cols="70"></textarea>
        </label>
        <br>
        <button class="button_send" type="submit">Send</button>
    </form>
</div>
<script>
    window.addEventListener("DOMContentLoaded", function() {
        [].forEach.call( document.querySelectorAll('.tel'), function(input) {
            var keyCode;
            function mask(event) {
                event.keyCode && (keyCode = event.keyCode);
                var pos = this.selectionStart;
                if (pos < 3) event.preventDefault();
                var matrix = "+7 (___) ___ ____",
                    i = 0,
                    def = matrix.replace(/\D/g, ""),
                    val = this.value.replace(/\D/g, ""),
                    new_value = matrix.replace(/[_\d]/g, function(a) {
                        return i < val.length ? val.charAt(i++) || def.charAt(i) : a
                    });
                i = new_value.indexOf("_");
                if (i != -1) {
                    i < 5 && (i = 3);
                    new_value = new_value.slice(0, i)
                }
                var reg = matrix.substr(0, this.value.length).replace(/_+/g,
                    function(a) {
                        return "\\d{1," + a.length + "}"
                    }).replace(/[+()]/g, "\\$&");
                reg = new RegExp("^" + reg + "$");
                if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) this.value = new_value;
                if (event.type == "blur" && this.value.length < 5)  this.value = ""
            }

            input.addEventListener("input", mask, false);
            input.addEventListener("focus", mask, false);
            input.addEventListener("blur", mask, false);
            input.addEventListener("keydown", mask, false)

        });
    });
    function clearFields() {
        // Очистка полей через 3 секунды
        setTimeout(function() {
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('comments').value = '';
        }, 2000);
        return true;
    }

    function toggleDropdown() {
        var dropdown = document.getElementById("myDropdown");
        dropdown.classList.toggle("active");

        var menuIcon = document.querySelector(".menu-icon");
        if (menuIcon.getAttribute("src") === "contact_me_images/Group%208.svg") {
            menuIcon.setAttribute("src", "contact_me_images/Union.svg");
        } else {
            menuIcon.setAttribute("src", "contact_me_images/Group%208.svg");
        }
    }

    window.addEventListener('click', function(e) {
        var dropdown = document.getElementById("myDropdown");
        var menuIcon = document.querySelector(".menu-icon");
        if (!dropdown.contains(e.target)) {
            dropdown.classList.remove("active");
            menuIcon.setAttribute("src", "contact_me_images/Group%208.svg");
        }
    });
</script>
</body>
</html>